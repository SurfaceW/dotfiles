#!/usr/bin/env osascript -l JavaScript

function run(argv) {
    var vpn = JSON.parse(argv[0])

    if (vpn.type === "native") {
        var app = Application("System Events")
        var service = app.networkPreferences.services.byId(vpn.id)
        if (service.currentConfiguration.connected() === true) {
            service.disconnect()
        } else {
            service.connect()
        }
    }
}
